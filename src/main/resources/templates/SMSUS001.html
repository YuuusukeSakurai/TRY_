<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link th:href="@{../css/bootstrap/bootstrap.min.css}" rel="stylesheet" type="text/css">
	<link th:href="@{../css/index.css}" rel="stylesheet" type="text/css">
	<link th:href="@{../css/menu.css}" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@latest/dist/plugins/monthSelect/style.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css">
	<link rel="stylesheet" href="../css/SMSUS001.css" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Round|Material+Icons+Sharp|Material+Icons+Two+Tone" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="../js/index.js"></script>
	<script src="../js/SMSUS001.js"></script>
	<title>WHC:ユーザーマスタ一覧</title>
</head>

<body>
	<header>
		<!-- ヘッダー部分は、Tymeleafで共通化すること-->
		<nav class="navbar navbar-expand-lg navbar-light border-bottom shadow-sm" style="background-color: #f36304">
			<a class="navbar-brand" href="ML010.html">
				<span class="ml-1" style="color: white; font-size: 1.0em; font-weight: bold;">労働時間計算システム </span>
			</a>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto"></ul>

				<ul class="navbar-nav">
					<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: white">
							[Acount Name] <span class="visually-hidden">(current)</span>
						</a>
						<div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown" style="background-color: #f36304">
							<a class="dropdown-item" href="LF020.html" style="color: white">パスワード変更</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="LF010.html" style="color: white">ログアウト</a>
						</div>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<div class="d-flex flex-row">

		<div th:replace="~{menu::menu}"></div>

		<main class="w-100 bg-light">
			<div class="container bg-white border py-3 my-3">
				<div th:text="${message}" class="message"></div>
				<div class="card shadow bg-light">
					<h3 class="font-weight-bold p-2">検索条件</h3>
					<form method="post" action="/user/list">
						<div class="card-body p-2">
							<div class="input-group mb-2 mx-2">
								<span class="input-group-text">ユーザID</span>
								<input type="text" name="userId" th:value="${userId}" aria-label="emNo" class="form-control">
								<span class="input-group-text">ユーザ名</span>
								<input type="text" name="userName" th:value="${userName}" class="form-control">
							</div>
						</div>

						<div class="card-body p-2">
							<div class="input-group mb-2 mx-2">
								<span class="input-group-text">権限</span>
								<select name="permission" id="permission-select">
									<option value="all" th:selected="${permission == 'all'}">全て</option>
									<option value="admin" th:selected="${permission == 'admin'}">管理者</option>
									<option value="user" th:selected="${permission == 'user'}">一般</option>
								</select>
							</div>
						</div>

						<div class=" card-body p-2">
							<div class="input-group mb-2 mx-2" style="width: 500px">
								<span class="input-group-text">メールアドレス</span>
								<input type="text" name="mailAddress" th:value="${mailAddress}" aria-label="emNo" class="form-control">
							</div>
						</div>

						<div class="card-body p-2">
							<button type="submit" class="btn btn-success border border-dark mb-2 mx-2">検索</button>
						</div>
					</form>
				</div>
				<form method="post" action="/user/delete">
					<div class="card-body p-2">
						<button type="button" onclick="location.href='/user/regist?seq_id=0'" class="btn btn-success border border-dark mb-2 mx-2">新規登録</button>
						<button type="button" id="delete" class="btn btn-success border border-dark mb-2 mx-2">選択行削除</button>
					</div>

					<div class="text-nowrap table-responsive" id="listLimit">
						<table class="table table-sm table-striped table-bordered my-3">
							<thead>
								<tr bgcolor="royalblue" class="text-center">
									<th scope="col" style="width: 20px">
										<input type="checkbox">
									</th>
									<th scope="col" class="table-user-id">ユーザID</th>
									<th scope="col" class="table-user-name">ユーザ名</th>
									<th scope="col" class="table-user-auth">権限</th>
									<th scope="col" class="table-user-mailaddress">メールアドレス</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="user:${allUserList}">
									<th class="text-center">
										<input type="checkbox" name="deleteCheck[]" th:value="${user.seq_id}">
									</th>
									<td th:text="${user.user_id}"></td>
									<td>
										<a th:text="${user.user_name}" href="/user/regist" th:href="@{/user/regist(seq_id=${user.seq_id})}"></a>
									</td>
									<td th:text="${user.auth_status}"></td>
									<td th:text="${user.mail_address}"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</form>
				<!--ページネーション(一覧表示)-->
				<div class="ms-5" th:if="${mode == 'view'}">
					<ul class="pagenation">
						<li th:if="${currentPage > 2}">
							<a th:href="@{/user/list(page=1)}" class="mx-1">最初へ</a>
						</li>
						<li th:if="${currentPage > 2}">
							<a th:href="@{/user/list(page=${currentPage - 2})}" class="mx-1">前へ</a>
						</li>
						<li th:each="pageNumber : ${#numbers.sequence(1, totalPages)}" th:if="${totalPages > 1}">
							<a th:href="@{/user/list(page=${pageNumber})}" th:text="${pageNumber}" class="mx-1"></a>
						</li>
						<li th:if="${currentPage < totalPages + 1}">
							<a th:href="@{/user/list(page=${currentPage})}" class="mx-1">次へ</a>
						</li>
						<li th:if="${currentPage < totalPages + 1}">
							<a th:href="@{/user/list(page=${totalPages})}" class="mx-1">最後へ</a>
						</li>
					</ul>
				</div>
				<!--<div class="ms-5">
					<a class="mx-3">← 前のページ</a>
					<a class="mx-1">1</a>
					<a class="mx-1">2</a>
					<a class="mx-1">3</a>
					<a class="mx-1">...</a>
					<a class="mx-1">10</a>
					<a class="mx-3">次のページ →</a>
				</div>-->
			</div>

		</main>
	</div>
	<script src="../js/menu.js"></script>
	<script src="../js/jquery-3.5.1.min.js"></script>
	<script src="../js/bootstrap/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
</body>

</html>